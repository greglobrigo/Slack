(this["webpackJsonpslack-app"]=this["webpackJsonpslack-app"]||[]).push([[0],{116:function(e,t,s){},157:function(e,t,s){},158:function(e,t,s){},178:function(e,t,s){},226:function(e,t,s){"use strict";s.r(t);var n=s(1),a=s.n(n),c=s(47),i=s.n(c),r=(s(157),s(158),s(8)),l=s(65),o=s(19),d=s(281),h=s(288),u=s(267),j=s(275),b=s(289),m=s(282),O=s(286),p=s(287),g=s(285),x=s(129),v=s(279),f=s(29),C=s.n(f);var S,y,k=function(e,t){var s=Object(n.useState)((function(){try{var s=window.localStorage.getItem(e);return s?JSON.parse(s):t}catch(n){return console.log(n),t}})),a=Object(r.a)(s,2),c=a[0],i=a[1];return[c,function(t){try{var s=t instanceof Function?t(c):t;i(s),window.localStorage.setItem(e,JSON.stringify(s))}catch(n){console.log(n)}}]},U=function(){var e=Object(n.useState)(!1),t=Object(r.a)(e,2),s=t[0],a=t[1];Object(n.useEffect)((function(){a(!0),setTimeout((function(){a(!1)}),3e3)}),[]);var c=k("headers",[]),i=Object(r.a)(c,2),l=(i[0],i[1]),o=k("userID",[]),d=Object(r.a)(o,2),h=(d[0],d[1]),u=Object(n.useState)(""),j=Object(r.a)(u,2),b=j[0],m=j[1],O=Object(n.useState)(""),p=Object(r.a)(O,2),g=p[0],x=p[1],v=Object(n.useState)(""),f=Object(r.a)(v,2),S=f[0],y=f[1],U=Object(n.useState)(!1),w=Object(r.a)(U,2),I=w[0],T=w[1],M=Object(n.useState)(!1),N=Object(r.a)(M,2),E=N[0],D=N[1],R=k("status",{isLoggedIn:!1,signedOut:!1}),A=Object(r.a)(R,2),B=(A[0],A[1]),W=Object(n.useState)({passwordsDoNotMatch:!1,invalidEmailFormat:!1,emailIsEmpty:!1,passwordIsEmpty:!1,passwordTooShort:!1}),F=Object(r.a)(W,2),z=F[0],P=F[1],L=Object(n.useState)({successful:!1,failed:!1}),H=Object(r.a)(L,2),_=H[0],G=H[1],V=Object(n.useState)({successful:!1,failed:!1}),J=Object(r.a)(V,2),Y=J[0],q=J[1],X=function(){C()({url:"https://slackapi.avionschool.com/api/v1/auth",data:{email:S,password:b,password_confirmation:g},headers:{},method:"POST"}).then((function(){G({successful:!0}),K()})).catch((function(e){console.log(e),G({failed:!0})}))},K=function(){y(""),m(""),x("")},Q=function(){a(!0),setTimeout((function(){a(!1),D(!0)}),2e3),B({isLoggedIn:!0,signedOut:!1})};return{password:b,setPassword:m,email:S,setEmail:y,logIn:function(e){e.preventDefault(),S?b?S.includes(".")?C()({url:"https://slackapi.avionschool.com/api/v1/auth/sign_in",data:{email:S,password:b},headers:{},method:"POST"}).then((function(e){h(e.data.data.id),l(e.headers),Q(),K()})).catch((function(e){console.log(e),q({failed:!0})})):P({invalidEmailFormat:!0}):P({passwordIsEmpty:!0}):P({emailIsEmpty:!0})},setIsLogin:q,isLogin:Y,isRegistering:I,setIsRegistering:T,secondPassword:g,setSecondPassword:x,register:function(e){e.preventDefault(),S.includes(".")?b&&g?b!==g?P({passwordsDoNotMatch:!0}):b.length<6?P({passwordTooShort:!0}):X():P({passwordIsEmpty:!0}):P({invalidEmailFormat:!0})},registerUser:X,isRegister:_,setIsRegister:G,validInfo:z,setValidInfo:P,setLoading:a,loading:s,transition:Q,route:E,setRoute:D}},w=(s(178),s(69)),I=s(94),T=s(119),M=s(2),N=Object(x.a)(),E=function(){var e=U(),t=e.password,s=e.setPassword,n=e.secondPassword,a=e.setSecondPassword,c=e.email,i=e.setEmail,r=e.logIn,l=e.isLogin,x=e.setIsLogin,f=e.isRegistering,C=e.setIsRegistering,S=e.register,y=e.isRegister,k=e.setIsRegister,E=e.setValidInfo,D=e.validInfo,R=e.loading,A=e.route;return Object(M.jsxs)(M.Fragment,{children:[A&&Object(M.jsx)(o.a,{to:"/chat"}),R?Object(M.jsx)(M.Fragment,{children:Object(M.jsxs)("div",{className:"loader",children:[Object(M.jsx)(w.HashLoader,{loading:R,color:"purple",size:80}),Object(M.jsx)("h3",{children:"Loading..."})]})}):Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)("div",{className:"background"}),Object(M.jsxs)(I.Fade,{up:!0,children:[Object(M.jsxs)("div",{className:"heading-container",children:[Object(M.jsxs)("span",{className:"heading",children:[Object(M.jsx)(T.a,{}),"Avion Slack App"]}),Object(M.jsx)("span",{className:"website",children:"avionschool.slack.com"})]}),Object(M.jsx)(v.a,{theme:N,children:Object(M.jsxs)(g.a,{component:"main",maxWidth:"xs",children:[Object(M.jsx)(u.a,{}),Object(M.jsxs)(O.a,{sx:{marginTop:5,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(M.jsx)(d.a,{sx:{m:1,bgcolor:"purple"}}),Object(M.jsx)(p.a,{component:"h1",variant:"h5",children:f?"Register ":"Sign in"}),Object(M.jsxs)(O.a,{component:"form",onClick:function(){x(!1),k(!1),E(!1)},noValidate:!0,sx:{mt:1},children:[Object(M.jsx)(j.a,{onChange:function(e){return i(e.target.value)},value:c,margin:"normal",fullWidth:!0,label:"Email Address",type:"text",autoFocus:!0}),Object(M.jsx)(j.a,{onChange:function(e){return s(e.target.value)},value:t,margin:"normal",fullWidth:!0,label:"Password",type:"password"}),f&&Object(M.jsxs)(I.Fade,{up:!0,children:[" ",Object(M.jsx)(j.a,{onChange:function(e){return a(e.target.value)},value:n,margin:"normal",fullWidth:!0,label:"Re-type Password",type:"password"})," "]}),l.failed&&Object(M.jsx)("span",{className:"failed",children:"Invalid email or password"}),y.successful&&Object(M.jsx)("span",{className:"success",children:"Registration Success!"}),y.failed&&Object(M.jsx)("span",{className:"failed",children:"Email already taken"}),D.invalidEmailFormat&&Object(M.jsx)("span",{className:"failed",children:"Invalid email format"}),D.emailIsEmpty&&Object(M.jsx)("span",{className:"failed",children:"Email is required"}),D.passwordIsEmpty&&Object(M.jsx)("span",{className:"failed",children:"Password is required"}),D.passwordsDoNotMatch&&Object(M.jsx)("span",{className:"failed",children:"Passwords do not match"})]}),Object(M.jsx)(h.a,{onClick:function(e){f?S(e):r(e)},type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2,backgroundColor:"purple"},children:f?"Sign up":"Sign In"}),Object(M.jsx)(m.a,{container:!0,children:Object(M.jsx)(m.a,{item:!0,children:Object(M.jsx)(b.a,{style:{cursor:"pointer"},onClick:function(){return C(!f)},variant:"body2",children:f?"Already have an account? Sign in":"Don't have an account? Sign Up"})})})]}),Object(M.jsxs)(p.a,{className:"copyright",variant:"body2",color:"text.secondary",align:"center",sx:{mt:3,mb:2},children:["Copyright \xa9 ",Object(M.jsx)("span",{color:"inherit",children:"Avion School Slack App"})," ",(new Date).getFullYear(),"."]})]})})]})]})]})},D=function(e){var t=e.loading;return Object(M.jsx)(M.Fragment,{children:Object(M.jsxs)("div",{className:"loader",children:[Object(M.jsx)(w.HashLoader,{loading:t,color:"purple",size:80}),Object(M.jsx)("h3",{children:"Almost there..."})]})})},R=s(17),A=s(48),B=function(){var e=k("headers",[]),t=Object(r.a)(e,1)[0],s=k("userID",[]),a=Object(r.a)(s,1)[0],c=Object(n.useState)([]),i=Object(r.a)(c,2),l=i[0],o=i[1],d=Object(n.useState)([]),h=Object(r.a)(d,2),u=h[0],j=h[1],b=Object(n.useState)(!1),m=Object(r.a)(b,2),O=m[0],p=m[1],g=Object(n.useState)(""),x=Object(r.a)(g,2),v=x[0],f=x[1],U=Object(n.useState)([]),w=Object(r.a)(U,2),I=w[0],T=w[1],M=Object(n.useState)(!1),N=Object(r.a)(M,2),E=N[0],D=N[1],B=Object(n.useState)([]),W=Object(r.a)(B,2),F=W[0],z=W[1],P=Object(n.useState)([]),L=Object(r.a)(P,2),H=L[0],_=L[1],G=Object(n.useState)([]),V=Object(r.a)(G,2),J=V[0],Y=V[1],q=Object(n.useState)({home:!0,channel:!1,directMessage:!1}),X=Object(r.a)(q,2),K=X[0],Q=X[1],Z=k("status",{isLoggedIn:!1,signedOut:!1}),$=Object(r.a)(Z,2),ee=$[0],te=$[1],se=l.filter((function(e){return!e.email.includes(t.uid)})),ne=Object(n.useState)({success:!1,failed:!1}),ae=Object(r.a)(ne,2),ce=ae[0],ie=ae[1],re=Object(n.useState)(""),le=Object(r.a)(re,2),oe=le[0],de=le[1],he=Object(n.useState)(!1),ue=Object(r.a)(he,2),je=ue[0],be=ue[1],me=Object(n.useState)(!1),Oe=Object(r.a)(me,2),pe=Oe[0],ge=Oe[1],xe=Object(n.useState)([]),ve=Object(r.a)(xe,2),fe=ve[0],Ce=ve[1],Se=Object(n.useState)({openSB:!1,vertical:"top",horizontal:"center"}),ye=Object(r.a)(Se,2),ke=ye[0],Ue=ye[1];Object(n.useEffect)((function(){p(!0),setTimeout((function(){p(!1)}),2e3)}),[]),Object(n.useEffect)((function(){C()({url:"https://slackapi.avionschool.com/api/v1/users",data:{},method:"GET",headers:{"access-token":t["access-token"],client:t.client,expiry:t.expiry,uid:t.uid}}).then((function(e){o(e.data.data)})).catch((function(e){console.log(e)}));C()({url:"https://slackapi.avionschool.com/api/v1/channels",data:{},method:"GET",headers:{"access-token":t["access-token"],client:t.client,expiry:t.expiry,uid:t.uid}}).then((function(e){return j(e.data.data)})).catch((function(e){console.log(e)})),Re()}),[t]);var we,Ie=function(e){C()({url:"https://slackapi.avionschool.com/api/v1/messages?receiver_id=".concat(e,"&receiver_class=Channel"),data:{},method:"GET",headers:{"access-token":t["access-token"],expiry:t.expiry,client:t.client,uid:t.uid}}).then((function(e){T(e.data.data)})).catch((function(e){console.log(e)}))},Te=function(e){C()({url:"https://slackapi.avionschool.com/api/v1/messages?receiver_id=".concat(e.id,"&receiver_class=User"),method:"GET",headers:{"access-token":t["access-token"],expiry:t.expiry,client:t.client,uid:t.uid}}).then((function(e){T(e.data.data)})).catch((function(e){console.log(e)}))},Me=Object(n.useState)({currentTime:"",currentDate:""}),Ne=Object(r.a)(Me,2),Ee=Ne[0],De=Ne[1],Re=function(){var e=new Date,t=new Array(7);t[0]="Sunday",t[1]="Monday",t[2]="Tuesday",t[3]="Wednesday",t[4]="Thursday",t[5]="Friday",t[6]="Saturday",setInterval((function(){var s=(new Date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),n=t[e.getDay()];De({currentTime:s,currentDate:n})}),1e3)};return{loading:O,headers:t,users:l,channels:u,handleClickOpenChannel:function(){be(!je)},openChannel:je,inviteUserToAChannel:function(e,s,n){var a,c=l.filter((function(t){return t.email===e}));C()({url:"https://slackapi.avionschool.com/api/v1/channel/add_member",data:{id:"".concat(fe.id),member_id:"".concat(null===(a=c[0])||void 0===a?void 0:a.id)},method:"POST",headers:{"access-token":t["access-token"],expiry:t.expiry,uid:t.uid,client:t.client}}).then((function(e){e.data.errors?de(e.data.errors):(Ue(Object(A.a)(Object(A.a)({},ke),{},{openSB:!0})),n(""),de(""),s()),console.log(e)})).catch((function(e){console.error(e)}))},createNewChannelWithUser:function(e,s,n){C()({url:"https://slackapi.avionschool.com/api/v1/channels",data:{name:"".concat(e),user_ids:[a]},method:"POST",headers:{"access-token":t["access-token"],expiry:t.expiry,client:t.client,uid:t.uid}}).then((function(e){var a;if(C()({url:"https://slackapi.avionschool.com/api/v1/channels",data:{},method:"GET",headers:{"access-token":t["access-token"],client:t.client,expiry:t.expiry,uid:t.uid}}).then((function(e){return j(e.data.data)})).catch((function(e){console.log(e)})),null===(a=e.data.data)||void 0===a?void 0:a.id)Ue(Object(A.a)(Object(A.a)({},ke),{},{openSB:!0})),s(),n("");else{var c=e.data.errors;ie({failed:Object(R.a)(c).join(". ")})}})).catch((function(e){console.log(e)}))},handleClickOpenUsers:function(){ge(!pe)},openUsers:pe,handleDrawerToggle:function(){D(!E)},mobileOpen:E,allMessagesRetrieved:I,message:v,setMessage:f,selectedChannel:fe,setSelectedChannel:Ce,createMessageInAChannel:function(e){C()({url:"https://slackapi.avionschool.com/api/v1/messages",data:{receiver_id:"".concat(fe.id),receiver_class:"Channel",body:"".concat(e)},method:"POST",headers:{"access-token":t["access-token"],expiry:t.expiry,client:t.client,uid:t.uid}}).then(Ie(fe.id)).catch((function(e){console.log(e)}))},intervalRetrieveMessages:function(e){clearTimeout(S),clearTimeout(y),_([]),Ie(e),S=setInterval((function(){Ie(e)}),1500)},userID:a,returnToHome:function(){Q({home:!0,channel:!1,directMessage:!1}),clearTimeout(S),clearTimeout(y),T([]),Ce([]),_([])},sortByEmail:function(e){e.length>0?we=setTimeout((function(){we&&clearTimeout(we);var t=se.filter((function(t){return t.email.includes(e)}));z(t)}),1e3):z(null)},searchResults:F,selectedUser:H,createDirectMessageToAUser:function(e){C()({url:"https://slackapi.avionschool.com/api/v1/messages",data:{receiver_id:"".concat(H.id),receiver_class:"User",body:"".concat(e)},method:"POST",headers:{"access-token":t["access-token"],expiry:t.expiry,client:t.client,uid:t.uid}}).catch((function(e){console.log(e)}))},intervalRetrieveMessagesWithUser:function(e){Q({home:!1,channel:!1,directMessage:!0}),clearTimeout(S),clearTimeout(y),Ce([]),_(e),Te(e),z([]),y=setInterval((function(){Te(e)}),1500)},currentDateAndTime:Ee,isCreateChannel:ce,setIsCreateChannel:ie,userInviteError:oe,setUserInviteError:de,stateSB:ke,setStateSB:Ue,retrieveChannelUsers:function(e){C()({url:"https://slackapi.avionschool.com/api/v1/channels/".concat(e),method:"GET",headers:{"access-token":t["access-token"],expiry:t.expiry,client:t.client,uid:t.uid}}).then((function(e){var t=e.data.data.channel_members.map((function(e){return e.user_id})),s=l.filter((function(e){return t.includes(e.id)}));Y(s),Q({home:!1,channel:!0,directMessage:!1})})).catch((function(e){console.log(e)}))},channelMembers:J,usersDisplayed:K,signOut:function(){Q({home:!0,channel:!1,directMessage:!1}),clearTimeout(S),clearTimeout(y),T([]),Ce([]),_([]),te({isLoggedIn:!1,signedOut:!0})},userStatus:ee,setMobileOpen:D}},W=s(283),F=s(274),z=s(292),P=s(290),L=s(291),H=s(123),_=s.n(H),G=s(122),V=s.n(G),J=s(298),Y=s(301),q=s(300),X=s(299),K=function(e){var t=e.open,s=e.handleClose,a=e.dialogTitleText,c=e.inviteUserToAChannel,i=e.label,l=e.type,o=e.createNewChannelWithUser,d=e.intervalRetrieveMessagesWithUser,u=e.sortByEmail,b=e.searchResults,m=e.isCreateChannel,O=e.setIsCreateChannel,p=e.userInviteError,g=e.setUserInviteError,x=e.setGetChannel,v=e.setGetEmail,f=Object(n.useState)(""),C=Object(r.a)(f,2),S=C[0],y=C[1];return Object(M.jsx)("div",{children:Object(M.jsxs)(J.a,{open:t,onClose:s,children:[Object(M.jsx)(X.a,{sx:{pb:1},children:a}),Object(M.jsxs)(q.a,{children:[u&&Object(M.jsx)(j.a,{autoFocus:!0,margin:"dense",id:"name",label:i,type:l,fullWidth:!0,variant:"standard",onChange:function(e){y(e.target.value),u(S)},value:S}),b&&Object(M.jsx)(P.a,{className:"list-results",children:b.slice(0,10).map((function(e){return Object(M.jsx)(F.a,{sx:{pl:4},onClick:function(){d(e),s(),y("")},children:Object(M.jsx)(L.a,{primary:"".concat(e.uid)})},e.id)}))}),c&&Object(M.jsx)(j.a,{autoFocus:!0,margin:"dense",id:"name",label:i,type:l,fullWidth:!0,variant:"standard",onChange:function(e){y(e.target.value)},value:S}),p&&Object(M.jsx)("span",{style:{color:"red"},children:p}),o&&Object(M.jsx)(j.a,{autoFocus:!0,margin:"dense",id:"name",label:i,type:l,fullWidth:!0,variant:"standard",onChange:function(e){y(e.target.value)},value:S}),(null===m||void 0===m?void 0:m.failed)&&Object(M.jsx)("span",{style:{color:"red"},children:Object(R.a)(m.failed)})]}),Object(M.jsxs)(Y.a,{children:[Object(M.jsx)(h.a,{onClick:function(){s(),y(""),m&&O(!1),p&&g("")},children:"Cancel"}),c&&Object(M.jsx)(h.a,{onClick:function(){v(S),c(S,s,y),setTimeout((function(){v("")}),4e3)},children:"Invite"}),o&&Object(M.jsx)(h.a,{sx:{alignItems:"center"},onClick:function(){x(S),o(S,s,y),setTimeout((function(){x("")}),4e3)},children:"Create"})]})]})})},Q=s(121),Z=s.n(Q),$=s(125),ee=s.n($),te=s(124),se=s.n(te);function ne(e){var t=e.open,s=e.handleClose,n=e.Avatar,a=e.signOut,c=e.headers.uid.toString();return Object(M.jsx)("div",{children:Object(M.jsxs)(J.a,{open:t,onClose:s,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(M.jsx)(X.a,{id:"alert-dialog-title",children:"Are you sure want to sign out?"}),Object(M.jsxs)(q.a,{style:{display:"flex",alignItems:"center"},children:[Object(M.jsx)(n,{style:{marginRight:"10px",backgroundColor:"purple"},children:"".concat(c[0].toUpperCase())}),c]}),Object(M.jsxs)(Y.a,{children:[Object(M.jsx)(h.a,{onClick:s,children:"No"}),Object(M.jsx)(h.a,{onClick:function(){a(),s()},autoFocus:!0,children:"Yes"})]})]})})}var ae=s(120),ce=function(e){e.handleClickOpenChannel,e.openChannel;var t=e.channels,s=e.createNewChannelWithUser,a=(e.handleClickOpenUsers,e.users),c=(e.openUsers,e.setSelectedChannel),i=e.intervalRetrieveMessages,l=e.returnToHome,h=e.sortByEmail,u=e.searchResults,j=e.intervalRetrieveMessagesWithUser,b=e.isCreateChannel,m=e.setIsCreateChannel,O=e.setGetChannel,p=e.retrieveChannelUsers,g=e.userStatus,x=e.headers,v=e.signOut,f=e.setMobileOpen,C=e.setHasScrolledUp,S=Object(n.useState)(!1),y=Object(r.a)(S,2),k=y[0],U=y[1],w=Object(n.useState)(!1),I=Object(r.a)(w,2),T=I[0],N=I[1],E=Object(n.useState)(!1),D=Object(r.a)(E,2),R=D[0],A=D[1];return Object(M.jsxs)(M.Fragment,{children:[g.signedOut&&Object(M.jsx)(o.a,{to:"/"}),Object(M.jsxs)(z.a,{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},sx:{bgcolor:"purple"},children:[Object(M.jsx)("span",{style:{color:"white"},children:"Avion Slack App"}),Object(M.jsx)(ae.a,{className:"toolbar-close-button",onClick:function(){return f(!1)}})]}),Object(M.jsxs)("div",{className:"sidebar-container channel-list",children:[Object(M.jsxs)("div",{className:"side-navigation",style:{backgroundColor:"#b491c8"},children:[Object(M.jsxs)(P.a,{children:[Object(M.jsxs)(F.a,{className:"side-navigation-item",onClick:function(){l()},children:[Object(M.jsx)(Z.a,{}),Object(M.jsx)("span",{style:{fontSize:"0.75rem"},children:"Home"})]}),Object(M.jsxs)(F.a,{className:"side-navigation-item",onClick:function(){U(!0)},children:[Object(M.jsx)(V.a,{}),Object(M.jsx)("span",{style:{fontSize:"0.75rem"},children:"Add"}),Object(M.jsx)("span",{style:{fontSize:"0.75rem"},children:"Channel"})]}),Object(M.jsxs)(F.a,{className:"side-navigation-item",onClick:function(){N(!0)},children:[Object(M.jsx)(_.a,{}),Object(M.jsx)("span",{style:{fontSize:"0.75rem"},children:"Direct"}),Object(M.jsx)("span",{style:{fontSize:"0.75rem"},children:"Message"})]})]}),Object(M.jsx)(P.a,{children:Object(M.jsxs)(F.a,{className:"side-navigation-item sign-out-button",onClick:function(){A(!0)},children:[Object(M.jsx)(se.a,{}),Object(M.jsx)("span",{children:"Sign Out"})]})})]}),Object(M.jsxs)("div",{className:"main-sidebar",children:[Object(M.jsxs)(P.a,{children:[Object(M.jsxs)("div",{style:{display:"flex"},children:[Object(M.jsx)(ee.a,{sx:{mt:.5,mr:1}}),Object(M.jsx)(L.a,{primary:"Channels (".concat(t?t.length:0,")")})]}),Object(M.jsx)(P.a,{component:"div",disablePadding:!0,children:t?t.map((function(e){return Object(M.jsx)("div",{children:Object(M.jsx)(F.a,{sx:{pl:4},onClick:function(){i(e.id),c(e),p(e.id),C(!1)},children:Object(M.jsx)(L.a,{primary:"# ".concat(e.name)})})},e.id)})):Object(M.jsx)(F.a,{sx:{pl:4},children:Object(M.jsx)(L.a,{primary:"No users Available"})})})]}),Object(M.jsx)(P.a,{})]})]}),Object(M.jsx)(K,{open:k,handleClose:function(){U(!1)},dialogTitleText:"Enter New Channel Name You Want to Create",label:"Channel Name",type:"text",createNewChannelWithUser:s,isCreateChannel:b,setIsCreateChannel:m,setGetChannel:O}),Object(M.jsx)(K,{open:T,handleClose:function(){N(!1)},dialogTitleText:"Who do you want to send a message to?",label:"Email",type:"text",users:a,sortByEmail:h,searchResults:u,intervalRetrieveMessagesWithUser:j}),Object(M.jsx)(ne,{open:R,setOpen:A,handleClickOpen:function(){A(!0)},handleClose:function(){A(!1)},Avatar:d.a,userStatus:g,headers:x,signOut:v})]})},ie=s(127),re=s.n(ie),le=s(294),oe=s(126),de=s.n(oe),he=s(293),ue=(s(116),function(e){var t=e.drawerWidth,s=e.headers,a=e.handleDrawerToggle,c=e.channels,i=e.selectedChannel,l=e.inviteUserToAChannel,o=e.userID,d=e.selectedUser,h=e.currentDateAndTime,u=e.userInviteError,j=e.setUserInviteError,b=e.setGetEmail,m=Object(n.useState)(!1),p=Object(r.a)(m,2),g=p[0],x=p[1];return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(he.a,{className:"appbar",position:"fixed",sx:{width:{sm:"calc(100% - ".concat(t,"px)")},ml:{sm:"".concat(t,"px")}},children:Object(M.jsxs)(z.a,{className:"top-toolbar",style:{backgroundColor:"purple"},children:[Object(M.jsx)(le.a,{color:"inherit","aria-label":"open drawer",edge:"end",onClick:a,sx:{mr:2,display:{sm:"none"}},children:Object(M.jsx)(de.a,{})}),i.name?Object(M.jsx)(O.a,{onClick:function(){x(!0)},children:Object(M.jsxs)(F.a,{className:"invite-button",children:[Object(M.jsx)(re.a,{style:{fontSize:"1.5rem",marginRight:"0.5rem"}}),Object(M.jsx)("span",{className:"invite",children:"Invite"})]})}):Object(M.jsxs)(O.a,{style:{display:"flex",flexDirection:"column"},children:[Object(M.jsx)("span",{style:{fontSize:"0.75rem"},children:"".concat(h.currentDate)}),Object(M.jsx)("span",{style:{fontSize:"0.75rem"},children:"".concat(h.currentTime)})]}),(i.name||d.email)&&Object(M.jsx)(O.a,{children:Object(M.jsx)(F.a,{children:Object(M.jsxs)("span",{style:{fontSize:"0.9rem"},className:"topbar-small",children:[i.name&&Object(M.jsxs)("span",{children:[Object(M.jsx)("span",{className:"top-bar-channel",children:"Channel:"})," ",Object(M.jsx)("span",{children:i.name})]})," ",d.email&&"Chat with ".concat(d.email)]})})}),Object(M.jsxs)(O.a,{className:"top-bar-email",children:[Object(M.jsx)("span",{style:{fontSize:"0.75rem",paddingRight:"2px"},children:"".concat(s.uid)}),Object(M.jsx)("span",{style:{fontSize:"0.75rem"},children:"ID: ".concat(o)})]})]})}),Object(M.jsx)(K,{open:g,handleClose:function(){x(!1)},dialogTitleText:i&&"Enter email to invite to ".concat(i.name),channels:c,type:"text",label:"Email",inviteUserToAChannel:l,userInviteError:u,setUserInviteError:j,setGetEmail:b})]})}),je=s(277);function be(e){var t=e.stateSB,s=e.setStateSB,n=e.messageSB,a=t.vertical,c=t.horizontal,i=t.openSB;return Object(M.jsx)(je.a,{open:i,autoHideDuration:3e3,anchorOrigin:{vertical:a,horizontal:c},onClose:function(){return s(Object(A.a)(Object(A.a)({},t),{},{openSB:!1}))},message:n},a+c)}var me=s(128),Oe=s.n(me),pe=s(99),ge=function(e){var t=e.allMessagesRetrieved,s=e.setMessage,a=e.message,c=e.createMessageInAChannel,i=e.selectedChannel,r=e.selectedUser,l=e.createDirectMessageToAUser,o=e.stateSB,h=e.setStateSB,u=e.getChannel,b=e.getEmail,m=e.hasScrolledUp,p=e.setHasScrolledUp,g=Object(n.useRef)(),x=Object(n.useRef)();return window.onscroll=function(){p(!0)},Object(n.useEffect)((function(){m||(null===t||void 0===t?void 0:t.length)>=1&&g.current.scrollIntoView({behavior:"smooth"})}),[t,m]),Object(M.jsxs)(M.Fragment,{children:[u&&Object(M.jsx)(be,{stateSB:o,messageSB:"Successfully Created Channel: ".concat(u,"!"),setStateSB:h}),b&&Object(M.jsx)(be,{stateSB:o,messageSB:"Successfully Added User: ".concat(b,"!"),setStateSB:h}),Object(M.jsxs)(O.a,{component:"main",className:"chat-body",children:[Object(M.jsx)(z.a,{}),Object(M.jsxs)(O.a,{style:{display:"flex",flexDirection:"column",width:"600px"},children:[(null===t||void 0===t?void 0:t.length)>=1?t.map((function(e,s){return Object(M.jsx)("div",{ref:s+1===t.length?g:void 0,children:Object(M.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(M.jsx)("div",{style:{padding:"12.5px 0",marginRight:"25px"},children:Object(M.jsx)(d.a,{style:{backgroundColor:"purple"},children:e.sender.email.slice(0,1).toUpperCase()})}),Object(M.jsxs)("div",{style:{padding:"15px 0 12.5px 0"},children:[Object(M.jsxs)("p",{style:{margin:"0"},children:[" ","".concat(e.sender.email.split("@")[0]," says:")]}),Object(M.jsx)("p",{style:{margin:"0"},children:e.body}),Object(M.jsx)("p",{style:{margin:"0",fontSize:"12px"},children:"".concat(Oe()(e.created_at).fromNow())})]})]})},e.id)})):i.name&&Object(M.jsxs)("div",{className:"greetings",children:[Object(M.jsx)("div",{className:"no-chat-img"}),Object(M.jsxs)("span",{children:["Channel: ",i.name," has no messages."]})]})||r.email&&Object(M.jsxs)("span",{className:"greetings",children:["You have no chat history with ",r.email.split("@")[0],". Send him/her a message!"]})||Object(M.jsxs)("div",{className:"greetings",children:[Object(M.jsx)("div",{className:"home-img"}),Object(M.jsx)("span",{children:"Welcome to Avion Slack App! Hop on a channel or send a DM to get started!\ud83d\udc40"})]}),Object(M.jsx)("div",{style:{paddingBottom:"50px"},ref:x})]}),i.name&&Object(M.jsxs)(O.a,{className:"message-area-container",component:"form",noValidate:!0,autoComplete:"off",onSubmit:function(e){e.preventDefault(),c(a),x.current.scrollIntoView({behavior:"smooth"}),s("")},children:[Object(M.jsx)(j.a,{className:"message-area",id:"outlined-basic",label:"Enter your message here",variant:"outlined",onChange:function(e){return s(e.target.value)},value:a}),Object(M.jsx)("div",{className:"send-message-button",onClick:function(e){e.preventDefault(),c(a),x.current.scrollIntoView({behavior:"smooth"}),s("")},children:Object(M.jsx)(pe.a,{size:40})})]}),r.email&&Object(M.jsxs)(O.a,{className:"message-area-container",component:"form",noValidate:!0,autoComplete:"off",onSubmit:function(e){e.preventDefault(),l(a),x.current.scrollIntoView({behavior:"smooth"}),s("")},children:[Object(M.jsx)(j.a,{className:"message-area",id:"outlined-basic",label:"Enter your message here",variant:"outlined",onChange:function(e){return s(e.target.value)},value:a}),Object(M.jsx)("div",{className:"send-message-button",onClick:function(e){e.preventDefault(),l(a),x.current.scrollIntoView({behavior:"smooth"}),s("")},children:Object(M.jsx)(pe.a,{size:40})})]})]})]})},xe=s(295),ve=s(280),fe=s(296),Ce=function(e){var t=e.users,s=e.channelMembers,n=e.usersDisplayed,a=e.selectedUser;return Object(M.jsxs)(W.a,{className:"right-side-bar",sx:{width:240,flexShrink:0,"& .MuiDrawer-paper":{width:240,boxSizing:"border-box"}},variant:"permanent",anchor:"right",children:[Object(M.jsx)(z.a,{}),Object(M.jsx)(xe.a,{}),n.home&&Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(fe.a,{children:"ALL USERS"}),Object(M.jsx)(P.a,{style:{overflowX:"hidden"},className:"channel-list",children:t.slice(0,100).map((function(e){return Object(M.jsxs)(ve.a,{children:[Object(M.jsx)(d.a,{style:{marginRight:"10px",backgroundColor:"purple"},children:e.email.slice(0,1).toUpperCase()}),Object(M.jsx)(L.a,{style:{margin:0,width:"100%"},primary:"".concat(e.uid.split("@")[0])})]},e.id)}))})]}),n.channel&&Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(fe.a,{children:"Channel Members"}),Object(M.jsx)(P.a,{style:{overflowX:"hidden"},className:"channel-list",children:s.map((function(e){return Object(M.jsxs)(ve.a,{children:[Object(M.jsx)(d.a,{style:{marginRight:"10px",backgroundColor:"purple"},children:e.email.slice(0,1).toUpperCase()}),Object(M.jsx)(L.a,{style:{margin:0,width:"100%"},primary:"".concat(e.email.split("@")[0])})]},e.id)}))})]}),n.directMessage&&Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)("div",{style:{display:"flex",justifyContent:"center",textAlign:"center"},children:Object(M.jsxs)("h5",{children:["Conversation with ",Object(M.jsx)("br",{}),Object(M.jsx)("span",{children:a.email&&a.email.split("@")[0]})]})}),Object(M.jsx)("div",{style:{display:"flex",justifyContent:"center",textAlign:"center"},children:Object(M.jsx)("div",{className:"chat-dm"})})]}),Object(M.jsx)(xe.a,{})]})},Se=function(e){var t=e.headers,s=e.users,a=e.channels,c=e.handleClickOpenChannel,i=e.openChannel,l=e.inviteUserToAChannel,o=e.createNewChannelWithUser,d=e.handleClickOpenUsers,h=e.openUsers,j=e.handleDrawerToggle,b=e.mobileOpen,m=e.allMessagesRetrieved,p=e.message,g=e.setMessage,x=e.isAChannelSelected,v=e.selectedChannel,f=e.setSelectedChannel,C=e.createMessageInAChannel,S=e.intervalRetrieveMessages,y=e.userID,k=e.returnToHome,U=e.sortByEmail,w=e.searchResults,I=e.selectedUser,T=e.createDirectMessageToAUser,N=e.intervalRetrieveMessagesWithUser,E=e.currentDateAndTime,D=e.isCreateChannel,R=e.setIsCreateChannel,A=e.userInviteError,B=e.setUserInviteError,F=e.stateSB,z=e.setStateSB,P=e.retrieveChannelUsers,L=e.channelMembers,H=e.usersDisplayed,_=e.userStatus,G=e.signOut,V=e.setMobileOpen,J=320,Y=Object(n.useState)(""),q=Object(r.a)(Y,2),X=q[0],K=q[1],Q=Object(n.useState)(""),Z=Object(r.a)(Q,2),$=Z[0],ee=Z[1],te=Object(n.useState)(!1),se=Object(r.a)(te,2),ne=se[0],ae=se[1];return Object(M.jsx)(M.Fragment,{children:Object(M.jsxs)(O.a,{children:[Object(M.jsx)(u.a,{}),Object(M.jsx)(ue,{drawerWidth:J,headers:t,handleDrawerToggle:j,isAChannelSelected:x,selectedChannel:v,inviteUserToAChannel:l,userID:y,selectedUser:I,currentDateAndTime:E,userInviteError:A,setUserInviteError:B,setGetEmail:ee}),Object(M.jsxs)(O.a,{component:"nav",sx:{width:{sm:J},flexShrink:{sm:0}},"aria-label":"mailbox folders",children:[Object(M.jsx)(W.a,{variant:"temporary",open:b,onClose:j,ModalProps:{keepMounted:!0},sx:{display:{xs:"block",sm:"none"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:J}},children:Object(M.jsx)(ce,{handleClickOpenChannel:c,openChannel:i,createNewChannelWithUser:o,handleClickOpenUsers:d,users:s,openUsers:h,setSelectedChannel:f,intervalRetrieveMessages:S,returnToHome:k,sortByEmail:U,searchResults:w,intervalRetrieveMessagesWithUser:N,channels:a,isCreateChannel:D,setIsCreateChannel:R,setGetChannel:K,retrieveChannelUsers:P,userStatus:_,headers:t,signOut:G,setMobileOpen:V,setHasScrolledUp:ae})}),Object(M.jsx)(W.a,{variant:"permanent",sx:{display:{xs:"none",sm:"block"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:J}},open:!0,children:Object(M.jsx)(ce,{handleClickOpenChannel:c,openChannel:i,createNewChannelWithUser:o,handleClickOpenUsers:d,users:s,openUsers:h,setSelectedChannel:f,intervalRetrieveMessages:S,returnToHome:k,sortByEmail:U,searchResults:w,intervalRetrieveMessagesWithUser:N,channels:a,isCreateChannel:D,setIsCreateChannel:R,setGetChannel:K,retrieveChannelUsers:P,userStatus:_,headers:t,signOut:G,setMobileOpen:V,setHasScrolledUp:ae})})]}),Object(M.jsx)(Ce,{users:s,channelMembers:L,usersDisplayed:H,selectedUser:I}),Object(M.jsx)(ge,{allMessagesRetrieved:m,setMessage:g,message:p,createMessageInAChannel:C,selectedChannel:v,selectedUser:I,createDirectMessageToAUser:T,stateSB:F,setStateSB:z,getChannel:X,getEmail:$,hasScrolledUp:ne,setHasScrolledUp:ae})]})})},ye=function(){var e=B(),t=e.headers,s=e.users,n=e.channels,a=e.handleClickOpenChannel,c=e.openChannel,i=e.inviteUserToAChannel,r=e.createNewChannelWithUser,l=e.handleClickOpenUsers,o=e.openUsers,d=e.handleDrawerToggle,h=e.mobileOpen,u=e.allMessagesRetrieved,j=e.message,b=e.setMessage,m=e.isAChannelSelected,O=e.selectedChannel,p=e.setSelectedChannel,g=e.createMessageInAChannel,x=e.intervalRetrieveMessages,v=e.userID,f=e.returnToHome,C=e.sortByEmail,S=e.searchResults,y=e.selectedUser,k=e.createDirectMessageToAUser,U=e.intervalRetrieveMessagesWithUser,w=e.loading,I=e.currentDateAndTime,T=e.isCreateChannel,N=e.setIsCreateChannel,E=e.userInviteError,R=e.setUserInviteError,A=e.stateSB,W=e.setStateSB,F=e.retrieveChannelUsers,z=e.channelMembers,P=e.usersDisplayed,L=e.userStatus,H=e.signOut,_=e.setMobileOpen;return Object(M.jsx)(M.Fragment,{children:w?Object(M.jsx)(D,{loading:w}):Object(M.jsx)(Se,{headers:t,users:s,channels:n,handleClickOpenChannel:a,openChannel:c,inviteUserToAChannel:i,createNewChannelWithUser:r,handleClickOpenUsers:l,openUsers:o,handleDrawerToggle:d,mobileOpen:h,allMessagesRetrieved:u,message:j,setMessage:b,isAChannelSelected:m,selectedChannel:O,setSelectedChannel:p,createMessageInAChannel:g,intervalRetrieveMessages:x,userID:v,returnToHome:f,sortByEmail:C,searchResults:S,selectedUser:y,createDirectMessageToAUser:k,intervalRetrieveMessagesWithUser:U,currentDateAndTime:I,isCreateChannel:T,setIsCreateChannel:N,userInviteError:E,setUserInviteError:R,stateSB:A,setStateSB:W,retrieveChannelUsers:F,channelMembers:z,usersDisplayed:P,userStatus:L,signOut:H,setMobileOpen:_})})},ke=function(){var e=k("status"),t=Object(r.a)(e,1)[0];return Object(M.jsx)(M.Fragment,{children:Object(M.jsx)(l.a,{children:Object(M.jsxs)(o.d,{children:[Object(M.jsx)(o.b,{exact:!0,path:"/",component:function(){return(null===t||void 0===t?void 0:t.isLoggedIn)?Object(M.jsx)(o.a,{to:"/chat"}):Object(M.jsx)(E,{})}}),Object(M.jsx)(o.b,{exact:!0,path:"/chat",component:ye,children:Object(M.jsx)(ye,{})})]})})})},Ue=function(){return Object(M.jsx)(ke,{})},we=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,302)).then((function(t){var s=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;s(e),n(e),a(e),c(e),i(e)}))};i.a.render(Object(M.jsx)(a.a.StrictMode,{children:Object(M.jsx)(Ue,{})}),document.getElementById("root")),we()}},[[226,1,2]]]);
//# sourceMappingURL=main.2322528a.chunk.js.map